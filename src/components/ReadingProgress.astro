---
---
<div id="reading-progress"></div>

<script>
  const bar = document.getElementById('reading-progress');

  function updateProgress() {
    const article = document.querySelector('.content');
    if (!article || !bar) return;

    const rect = article.getBoundingClientRect();
    const totalHeight = article.scrollHeight;
    const windowHeight = window.innerHeight;
    const scrolled = window.scrollY - (article.offsetTop || 0);
    const progress = Math.min(Math.max(scrolled / (totalHeight - windowHeight), 0), 1);

    bar.style.transform = `scaleX(${progress})`;
  }

  function checkScrollable() {
    if (!bar) return;
    if (document.documentElement.scrollHeight > window.innerHeight) {
      bar.style.display = '';
      updateProgress();
    } else {
      bar.style.display = 'none';
    }
  }

  window.addEventListener('scroll', updateProgress, { passive: true });
  window.addEventListener('resize', checkScrollable, { passive: true });
  checkScrollable();
</script>
